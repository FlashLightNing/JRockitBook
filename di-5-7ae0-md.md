# 5 基准测试与性能调优 {#5-基准测试与性能调优}

本章将对如何通过基准测试（benchmark）来衡量应用程序的性能，以及如何对JVM进行调优，以便Java应用程序可以运行得更快。

基准测试可以，而且也应该用来在开始过程中对应用程序进行回归测试（regression test），以确保对应用程序的新近修改不会降低原有的性能。在本书作者的职业生涯中，已经见过多次因无心的修改而导致性能下降的案例，应用持续的、自动化的基准测试可以避免这种情况的发生。每个软件项目都有期望的性能目标，而基准测试就是为此而保驾护航的。

在讨论为何要做好基准测试，如何做好基准测试时，还会介绍如何通过基准测试做给出的性能指标得出相关结论，以及为达到期望目标，何时需要修改应用程序或者JVM参数配置。调优方面的内容会以JRockit为例进行讲解。

本章的主要内容如下：

* [使用基准测试找出应用程序的性能瓶颈](./5.1.md#5.1)
  ，防止应用程序在开发过程中出现性能下降的情况，确保达到预期的性能目标。
* [如何针对特定的问题建立基准测试](./5.2.md#5.2)
  ，这其中包括确定基准测试所要测量的指标，以及如何从应用程序中抽取中待测试功能。
* [介绍几种可测试Java应用程序的、具有工业标准基准测试](./5.4.md#5.4)
  。
* [介绍如何根据基准测试的结果对应用程序JVM进行调优](./5.6.md#5.6)
  。
* [如何识别Java应用程序中的性能瓶颈，以及如何避免性能瓶颈，这其中包括常见陷阱、错误，以及伪优化](./5.7.md#5.7)
  。

> 在本章中，还会对SPEC基准测试进行介绍。[SPEC（www.spec.org）](http://www.spec.org)是一个非盈利性组织，其宗旨是建立、维护和推广用于评估新一代计算机系统性能的基准测试程序。对于本章中所提到的SPEC的产品和服务，SPCE组织拥有知识产权，受法律保护。



